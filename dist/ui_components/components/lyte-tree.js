Lyte.Component.register("lyte-tree",{_template:'<template tag-name="lyte-tree">\n  <template is="for" items="{{ltPropData}}" item="item" index="index">\n    <div class="lyteTreeBodyDiv">\n      <lyte-tree-body data-value="{{lyteUiTreeHelp(tempVar, index)}}">\n        <div class="mainContainer">\n        <lyte-yield collapsed="{{if(item.collapsed, \'collapsed\', \'\')}}" yield-name="content" list-value="{{item}}" list-index="{{lyteUiTreeHelp(tempVar, index)}}" class="{{lyteUiTreeChildHelp(item, \'noChildTree\')}}"></lyte-yield>\n          <template is="if" value="{{expHandlers(expHandlers(expHandlers(item.children.length,\'!==\',0),\'&amp;&amp;\',expHandlers(item.children,\'!==\',undefined)),\'&amp;&amp;\',expHandlers(item.collapsed,\'!\'))}}"><template case="true">\n            <template is="if" value="{{expHandlers(expHandlers(item.defaultState,\'!\'),\'||\',expHandlers(item.defaultState,\'===\',&quot;open&quot;))}}"><template case="true">\n              <lyte-tree class="lyteTreeOpened" temp-var="{{lyteUiTreeHelp(tempVar, index)}}" lt-prop-data="{{item.children}}" id="{{ltPropId}}" lt-prop-tree-lines="{{ltPropTreeLines}}" lt-prop-yield="{{ltPropYield}}" lt-prop-open-class="{{ltPropOpenClass}}" lt-prop-close-class="{{ltPropCloseClass}}" on-toggle="{{method(\'onToggle\')}}">\n                <template is="registerYield" yield-name="content" from-parent="">\n                 </template>\n              </lyte-tree>\n            </template><template case="false"><template is="if" value="{{expHandlers(item.defaultState,\'===\',&quot;close&quot;)}}"><template case="true">\n              <lyte-tree class="lyteTreeClosed" temp-var="{{lyteUiTreeHelp(tempVar, index)}}" lt-prop-data="{{item.children}}" id="{{ltPropId}}" lt-prop-tree-lines="{{ltPropTreeLines}}" lt-prop-yield="{{ltPropYield}}" lt-prop-open-class="{{ltPropOpenClass}}" lt-prop-close-class="{{ltPropCloseClass}}" on-toggle="{{method(\'onToggle\')}}">\n                <template is="registerYield" yield-name="content" from-parent="">\n                 </template>\n              </lyte-tree>\n            </template></template></template></template>\n         </template></template>\n        </div>\n      </lyte-tree-body>\n  </div>\n  </template>\n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"for",position:[1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1,1]},{type:"insertYield",position:[1,1,1,1]},{type:"attr",position:[1,1,1,3]},{type:"if",position:[1,1,1,3],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[]},{type:"componentDynamic",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[]},{type:"componentDynamic",position:[1]}]}},default:{}}]}},default:{}}]}},default:{}},{type:"componentDynamic",position:[1,1]}]}],_observedAttributes:["ltPropData","ltPropOpenClass","ltPropCloseClass","ltPropNochildClass","treeHeight","ltPropStateAttr","heightTransArr","tempVar"],data:function(){return{ltPropData:Lyte.attr("array",{default:[]}),ltPropOpenClass:Lyte.attr("string",{default:""}),ltPropCloseClass:Lyte.attr("string",{default:""}),ltPropNochildClass:Lyte.attr("string",{default:""}),treeHeight:Lyte.attr("number",{default:0}),ltPropStateAttr:Lyte.attr("string",{default:""}),heightTransArr:Lyte.attr("array",{default:[]}),tempVar:Lyte.attr("string",{default:""})}},openrecursive:function(e){if(e.length){var t=e[0];if(e.shift(),!t||t.classList.contains("lyteTreeOpened"))return void this.openrecursive(e);var s=t.parentElement.querySelector("lyte-tree-icon");clearTimeout(t._treetime),t.classList.remove("lyteTreeClosed"),t.classList.add("lyteTreeOpened"),s.classList.remove("lyteIconClosed"),s.classList.add("lyteIconOpened"),t.style.display="",t.style.height="auto",this.data.ltPropCloseClass&&s.classList.remove(this.data.ltPropCloseClass),this.data.ltPropOpenClass&&s.classList.add(this.data.ltPropOpenClass),t._treetime=setTimeout(this.heightcalc.bind(this,t,e),0)}},heightcalc:function(e,t){if(document.body.contains(e)){var s=e.getBoundingClientRect().height;e.style.height=0,0==s?this.transEnd(e,t):setTimeout(this.heightset.bind(this,e,t,s),20)}else this.openrecursive(t)},heightset:function(e,t,s){document.body.contains(e)?(e.style.height=s+"px",e._trn=this.transEnd.bind(this,e,t),e.addEventListener("transitionend",e._trn)):this.openrecursive(t)},transEnd:function(e,t){e.style.height="auto",e.removeEventListener("transitionend",e._trn),delete e._trn,this.openrecursive(t)},stateChange:function(e){if(e.newValue){for(var t=e.newValue,s=[],n=1;n<=t.length;n++)s.push(this.$node.querySelector("lyte-tree[temp-var='"+t.slice(0,n)+"']"));this.openrecursive(s),this.setData("ltPropStateAttr","")}}.observes("ltPropStateAttr"),didConnect:function(){},methods:{onToggle:function(){}}}),Lyte.createCustomElement("lyte-tree-icon",{connectedCallback:function(){var e=this.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;e.classList.contains("lyteTreeClosed")&&(e.style.display="none"),this.hasAttribute("lyte-custom-icon")||(this.innerHTML='<i class="arrow up"></i>')},constructor:function(){for(var e,t=this.parentElement;"LYTE-TREE"!==t.nodeName;)t=t.parentElement;"LYTE-TREE"===t.nodeName&&(t=t.component);var s=this,n=s,i=t.$node.previousElementSibling;void 0!=i&&"content"===i.getAttribute("yield-name")&&(n=i.querySelector("lyte-tree-icon")),t.$node.classList.contains("lyteTreeOpened")?(n.className=t.getData("ltPropOpenClass"),n.classList.add("lyteIconOpened")):(n.className=t.getData("ltPropCloseClass"),n.classList.add("lyteIconClosed")),0===this.classList.length&&(this.className=t.getData("ltPropCloseClass"),this.classList.add("lyteIconClosed")),this.addEventListener("click",function(i){var l,a;if(i.preventDefault(),l=a=this)for(;"LYTE-TREE-BODY"!==l.nodeName;)l=l.parentElement;if("LYTE-TREE-BODY"===l.nodeName){var o=l.querySelector("lyte-tree");if(o&&!o.classList.contains("treeTransRunning")){var r=o.component;function p(){o.classList.remove("lyteTreeOpened"),o.classList.add("lyteTreeClosed"),this.style.height="auto",a.style.pointerEvents="auto",o.style.display="none",s.className=t.getData("ltPropCloseClass"),n.classList.add("lyteIconClosed"),o.classList.remove("treeTransRunning"),this.removeEventListener("transitionend",p)}function d(){this.style.height=r.getData("treeHeight")+"px",this.style.height="auto",a.style.pointerEvents="auto",s.className=t.getData("ltPropOpenClass"),s.classList.add("lyteIconOpened"),o.classList.remove("treeTransRunning"),this.removeEventListener("transitionend",d)}if(o.classList.contains("lyteTreeOpened")){var c=o.getBoundingClientRect().height;o.style.height=c+"px",setTimeout(function(){o.getBoundingClientRect().height;o.style.height="0px",o.classList.add("treeTransRunning"),o.addEventListener("transitionend",p)},10)}else o.classList.remove("lyteTreeClosed"),o.classList.add("lyteTreeOpened"),o.style.display="",o.style.height="auto",r.setData("treeHeight",o.getBoundingClientRect().height),o.style.height="0px",setTimeout(function(){o.style.height=r.getData("treeHeight")+"px",o.classList.add("treeTransRunning"),o.addEventListener("transitionend",d)},30)}}var m=l.parentElement.parentElement;function y(){var e=m.component.getData("ltPropData"),t=l.getAttribute("data-value").split("");if(t.length<2){void 0!==(s=e[n=t[0]])&&Lyte.objectUtils(s,"add","collapsed",!1)}else{for(var s=e,n=1;n<t.length;n++)s=e[t[n]];Lyte.objectUtils(s,"add","collapsed",!1)}}m&&m.component.getMethods("onToggle")&&(e=m.component.executeMethod("onToggle",l,i,m)),void 0!==e?e&&e.then?Promise.resolve(e).then(function(e){y()},function(){}):e&&y():y()}.bind(this))},static:{observedAttributes:{}}});