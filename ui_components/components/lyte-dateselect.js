function dtslctscroll(t){var e=document.querySelector("lyte-drop-box:not(.lyteDropdownHidden)");if(e){var i=e.origindd.parent.component;i.setCss.call(i)}}Lyte.Component.register("lyte-dateselect",{_template:'<template tag-name="lyte-dateselect">\n\t<lyte-dropdown lt-prop="{{stringify(ltPropDropdown)}}" on-before-show="{{method(\'bfSw\')}}" on-show="{{method(\'sw\')}}" on-before-hide="{{method(\'bfHde\')}}" on-hide="{{method(\'hde\')}}" on-option-selected="{{method(\'optSel\')}}" lt-prop-selected="{{lbind(ltPropSelected)}}">\n\t\t<template is="registerYield" yield-name="yield">\n\t\t\t<lyte-drop-button>\n\t\t\t\t<template is="if" value="{{ltPropButtonYield}}"><template case="true">\n\t\t\t\t\t<lyte-yield yield-name="buttonYield"></lyte-yield>\n\t\t\t\t</template><template case="false">\n\t\t\t\t\t{{ltPropDisplayValue}}\n\t\t\t\t\t<lyte-icon class="dropdown"></lyte-icon>\n\t\t\t\t</template></template>\n\t\t\t</lyte-drop-button>\n\t\t\t<lyte-drop-box class="{{ltPropDropdownWrapperClass}}" id="lyteDateSelect">\n\t\t\t\t<lyte-drop-body class="lyteList">\n\t\t\t\t\t<template is="forIn" object="{{ltPropOptions}}" value="value" key="key">\n\t\t\t\t\t\t<lyte-drop-item data-value="{{key}}" class="{{key}}">\n\t\t\t\t\t\t\t<template is="if" value="{{ltPropItemYield}}"><template case="true">\n\t\t\t\t\t\t\t\t<lyte-yield yield-name="item" item-value="{{ltPropOptions[key]}}"></lyte-yield>\n\t\t\t\t\t\t\t</template><template case="false"><template is="if" value="{{expHandlers(value,\'==\',true)}}"><template case="true">\n\t\t\t\t\t\t\t\t\t{{lyteUiI18n(key)}}\n\t\t\t\t\t\t\t\t</template><template case="false">\n\t\t\t\t\t\t\t\t\t{{value}}\n\t\t\t\t\t\t\t\t</template></template></template></template><template is="if" value="{{expHandlers(expHandlers(key,\'==\',\'specificDate\'),\'||\',expHandlers(key,\'==\',\'customRange\'))}}"><template case="true">\n\t\t\t\t\t\t\t\t\t<span class="{{if(ifEquals(pos, \'left\'), \'dateArrow arrowLeft\', \'dateArrow arrowRight\')}}"></span>\n\t\t\t\t\t\t\t</template></template>\n\t\t\t\t\t\t</lyte-drop-item>\n\t\t\t\t\t</template>\n\t\t\t\t</lyte-drop-body>\n\t\t\t</lyte-drop-box>\n\t\t</template>\n\t</lyte-dropdown>\n\t<div class="dateSelectcal lyteDropdownHidden {{ltPropCalendarWrapperClass}}">\n\t\t<template is="if" value="{{opend}}"><template case="true">\n\t\t\t<template is="if" value="{{ltPropOptions.specificDate}}"><template case="true">\n\t\t\t\t<div class="specificDate lyteDropdownHidden">\n\t\t\t\t\t<lyte-calendar lt-prop="{{stringify(ltPropCalendar)}}" lt-prop-current-date="{{lbind(ltPropCurrentDate)}}" on-date-selected="{{method(\'dateselected1\')}}">\n\t\t\t\t\t\t<template is="if" value="{{ltPropCalendarYield}}"><template case="true"> \n\t                        <template is="registerYield" yield-name="footer">\n\t                            <lyte-yield yield-name="footer"></lyte-yield>\n\t                        </template>\n\t                     </template></template>   \n\t\t\t\t\t</lyte-calendar>\n\t\t\t\t</div>\n\t\t\t</template></template>\n\t\t\t<template is="if" value="{{ltPropOptions.customRange}}"><template case="true">\n\t\t\t\t<div class="customRange lyteDropdownHidden">\n\t\t\t\t\t<lyte-daterangepicker lt-prop="{{stringify(ltPropDateRangePicker)}}" lt-prop-start-date="{{lbind(ltPropStartDate)}}" lt-prop-end-date="{{lbind(ltPropEndDate)}}" short-month-names="{{shortMonthNames}}" long-month-names="{{longMonthNames}}" cal-view-date1="{{lbind(ltPropStartDateObject)}}" cal-view-date2="{{lbind(ltPropEndDateObject)}}" on-date-selected="{{method(\'dateselected\')}}">\n\t\t\t\t\t</lyte-daterangepicker>\n\t\t\t\t</div>\t\n\t\t\t</template></template></template></template>\n\t</div>\n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"registerYield",position:[1,1],dynamicNodes:[{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]},{type:"componentDynamic",position:[3]}]}},default:{}},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1,1]},{type:"forIn",position:[3,1,1],dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"if",position:[1,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"insertYield",position:[1]}]},false:{dynamicNodes:[{type:"attr",position:[0]},{type:"if",position:[0],cases:{true:{dynamicNodes:[{type:"text",position:[1]}]},false:{dynamicNodes:[{type:"text",position:[1]}]}},default:{}}]}},default:{}},{type:"attr",position:[1,2]},{type:"if",position:[1,2],cases:{true:{dynamicNodes:[{type:"attr",position:[1]}]}},default:{}},{type:"componentDynamic",position:[1]}]},{type:"componentDynamic",position:[3,1]},{type:"componentDynamic",position:[3]}]},{type:"componentDynamic",position:[1]},{type:"attr",position:[3]},{type:"attr",position:[3,1]},{type:"if",position:[3,1],cases:{true:{dynamicNodes:[{type:"attr",position:[1]},{type:"if",position:[1],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"attr",position:[1,1,1]},{type:"if",position:[1,1,1],cases:{true:{dynamicNodes:[{type:"registerYield",position:[1],dynamicNodes:[{type:"insertYield",position:[1]}]}]}},default:{}},{type:"componentDynamic",position:[1,1]}]}},default:{}},{type:"attr",position:[3]},{type:"if",position:[3],cases:{true:{dynamicNodes:[{type:"attr",position:[1,1]},{type:"componentDynamic",position:[1,1]}]}},default:{}}]}},default:{}}],_observedAttributes:["shortMonthNames","longMonthNames","ltPropStartDateObject","ltPropEndDateObject","ltPropStartDate","ltPropEndDate","ltPropCurrentDate","ltPropCalendarYield","ltPropCalendar","ltPropDateRangePicker","ltPropItemYield","ltPropSelected","ltPropOptions","ltPropDropdownWrapperClass","ltPropDropdown","ltPropDisplayValue","ltPropButtonYield","ltPropCalendarWrapperClass","pos","prevSel","opend"],init:function(){this.getMethods("beforeRender")&&this.executeMethod("beforeRender",this.$node),this.$node.toggle=function(){this._drop.toggle()}.bind(this)},data:function(){return{shortMonthNames:Lyte.attr("array",{default:["Jan","Feb","Mar","Apr","short.may","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),longMonthNames:Lyte.attr("array",{default:["January","February","March","April","May","June","July","August","September","October","November","December"]}),ltPropStartDateObject:Lyte.attr("object"),ltPropEndDateObject:Lyte.attr("object"),ltPropStartDate:Lyte.attr("string",{default:""}),ltPropEndDate:Lyte.attr("string",{default:""}),ltPropCurrentDate:Lyte.attr("string",{default:""}),ltPropCalendarYield:Lyte.attr("boolean",{default:!1}),ltPropCalendar:Lyte.attr("object",{default:{headerType:"dropdown",fillRows:!1}}),ltPropDateRangePicker:Lyte.attr("object",{default:{monthHeaderFormat:"MMMM YYYY"}}),ltPropItemYield:Lyte.attr("boolean",{default:!1}),ltPropSelected:Lyte.attr("string",{default:"today"}),ltPropOptions:Lyte.attr("object",{default:{today:!0,yesterday:!0,last7days:!0,last30days:!0,thisWeek:!0,thisMonth:!0,specificDate:!0,customRange:!0}}),ltPropDropdownWrapperClass:Lyte.attr("string",{default:""}),ltPropDropdown:Lyte.attr("object",{default:{}}),ltPropDisplayValue:Lyte.attr("string",{default:""}),ltPropButtonYield:Lyte.attr("boolean",{default:!1}),ltPropCalendarWrapperClass:Lyte.attr("string",{default:""}),pos:Lyte.attr("string",{default:""}),prevSel:Lyte.attr("string",{default:""}),opend:Lyte.attr("boolean",{default:!1})}},didConnect:function(){this._drop=this.$node.querySelector("lyte-dropdown"),this._drop.parent=this.$node;var t=this._drop.component;this._cmp=t.childComp?t.childComp:this._drop.querySelector("lyte-drop-box"),this._end=this.tranEnd.bind(this),this._indend=this.tranEnd1.bind(this),this._caldiv=this.$node.querySelector(".dateSelectcal"),LyteComponent.appendChild(document.body,this._caldiv),this.data.ltPropButtonYield||this.setData("ltPropDisplayValue",this.getVal(this.data.ltPropSelected)),document._dateselectResize||(document._dateselectResize=!0,window.addEventListener("resize",dtslctscroll),window.addEventListener("scroll",dtslctscroll)),this.$node.toggle=function(t,e){this._drop.toggle(t,e)}.bind(this),this.getMethods("afterRender")&&this.executeMethod("afterRender",this.$node),$L.fastdom.measure(function(){this._dir=_lyteUiUtils.getRTL(),this._dir&&$L.fastdom.mutate(function(){this._caldiv.classList.add("lyteRTL")}.bind(this))}.bind(this))},didDestroy:function(){document.body.removeChild(this._caldiv),document._dateselectResize&&0==document.querySelectorAll("lyte-dateselect-copy").length&&(delete document._dateselectResize,window.removeEventListener("resize",dtslctscroll),window.removeEventListener("scroll",dtslctscroll)),delete this._caldiv,delete this._cmp,delete this._drop,delete this.$node.toggle},getVal:function(t){var e=this.data.ltPropOptions[t],i=e.constructor==Boolean?_lyteUiUtils.i18n(t):e;if(-1==["specificDate","customRange"].indexOf(t))return i;if("specificDate"==t)return this.data.ltPropCurrentDate||i;if("customRange"==t){var o=this.data.ltPropStartDate,n=this.data.ltPropEndDate;return o&&n?o+" - "+n:i}},selectedObs:function(t){if(t.newValue&&this._cmp&&!this._cmp.classList.contains("lyteDropdownHidden")){var e=-1!=["specificDate","customRange"].indexOf(t.oldValue)?this._caldiv.querySelector("."+t.oldValue):null;if(-1!=["specificDate","customRange"].indexOf(t.newValue)?this._caldiv.querySelector("."+t.newValue):null){if(e){var i=new Promise(function(t,i){this._new=t,this.hideele(e)}.bind(this));Promise.resolve(i).then(function(){$L.fastdom.mutate(this.openele.bind(this))}.bind(this))}else this.openele();this.data.prevSel=this.data.prevSel||t.oldValue}}}.observes("ltPropSelected"),tranEnd:function(t){this._cmp.removeEventListener("transitionend",this._end,!0),this._el&&(this._el.classList.add("lyteDropdownHidden"),delete this._el),this._res&&(this._res(!0),this._caldiv.classList.add("lyteDropdownHidden"),delete this._res)},tranEnd1:function(t){this._el.removeEventListener("transitionend",this._indend,!0),this._el.classList.add("lyteDropdownHidden"),this._new&&(this._new(!0),delete this._new),delete this._el},hideele:function(t){t.addEventListener("transitionend",this._indend,!0),this._el=t,t.style.opacity=0},openele:function(){var t=this.data.ltPropSelected;-1!=["specificDate","customRange"].indexOf(t)&&(this._caldiv.classList.remove("lyteDropdownHidden"),this._caldiv.querySelector("."+t).classList.remove("lyteDropdownHidden"),$L.fastdom.measure(this.setCss.bind(this)))},methods:{bfSw:function(t,e){var i;return this.getMethods("onBeforeShow")&&(i=this.executeMethod("onBeforeShow",t,e)),this.data.opend||0==i?i:(this.setData("opend",!0),new Promise(function(t){setTimeout(function(){t()},40)}))},sw:function(t,e){this.getMethods("onShow")&&this.executeMethod("onShow",t,e),$L.fastdom.mutate(function(){this.openele(),e.childComp.style.opacity=1}.bind(this))},bfHde:function(t,e){return this._prevent||this._caldiv.contains((t||{}).target)?(delete this._prevent,!1):(this.getMethods("onBeforeHide")&&(i=this.executeMethod("onBeforeHide",t,e)),0!=i?new Promise(function(t,i){this._res=t,e.childComp.addEventListener("transitionend",this._end,!0);var o=this._caldiv.querySelector(".specificDate:not(.lyteDropdownHidden),.customRange:not(.lyteDropdownHidden)");o&&(this._el=o,o.style.opacity=0),e.childComp.style.opacity=0}.bind(this)):i);var i},hde:function(t,e){if(!this._rest&&this.data.prevSel&&(this.setData("ltPropSelected",this.data.prevSel),this.data.ltPropButtonYield||this.setData("ltPropDisplayValue",this.getVal(this.data.ltPropSelected))),delete this._rest,this.data.prevSel="","specificDate"!=this.data.ltPropSelected&&this.setData("ltPropCurrentDate",""),"customRange"!=this.data.ltPropSelected&&(this.setData("ltPropStartDate",""),this.setData("ltPropEndDate","")),this.getMethods("onHide"))return this.executeMethod("onHide",t,e)},dateselected:function(t){this.selected(t,!0)},dateselected1:function(t){this.selected(t)},optSel:function(t,e,i,o){if(-1==["specificDate","customRange"].indexOf(e)){if(!this.data.ltPropButtonYield){var n=this.data.ltPropOptions[e],a=n.constructor==Boolean?_lyteUiUtils.i18n(e):n;this.setData("ltPropDisplayValue",a)}this.getMethods("onSelect")&&this.executeMethod("onSelect",t,this.$node,e,o),this._rest=!0}else this._prevent=!0}},setCss:function(t){function e(t,e,i){if(this._dir){if(e)return"right"==t?i-e.left:i-e.right;if("left"==t)return"right"}return e?e[t]:"left"}var i,o=this._caldiv,n=this._cmp,a=o.getBoundingClientRect(),l=n.getBoundingClientRect(),s=window.innerWidth,d=(window.pageXOffset||document.documentElement.scrollLeft)*(this._dir?-1:1),r=window.pageYOffset||document.documentElement.scrollTop,p=n.querySelector('lyte-drop-item[selected = "true"]'),c=p.getBoundingClientRect(),h=p.querySelector(".dateArrow"),y=h?h.getBoundingClientRect():{width:0},u=e.call(this,"left",l,s)+l.width+y.width/2+d,m=e.call(this,"left",l,s)-y.width/2-a.width+d,f=n.style.top;parseFloat(f)+a.height<c.bottom+r&&(f=r+c.bottom-a.height+"px"),u+a.width<s+d?i="right":m>d?(u=m,i="left"):s-e.call(this,"right",l,s)>e.call(this,"left",l,s)?i="right":(u=m,i="left"),$L.fastdom.mutate(function(){o.style[e.call(this,"left")]=u+"px",o.style.top=f,this._caldiv.querySelector("."+this.data.ltPropSelected).style.opacity=1,this.setData("pos",i)}.bind(this))},selected:function(t,e){this.data.ltPropButtonYield||this.setData("ltPropDisplayValue",this.getVal(this.data.ltPropSelected)),this.getMethods("onSelect")&&(e?this.executeMethod("onSelect",t,this.$node,"customRange",this.data.ltPropStartDate,this.data.ltPropEndDate):this.executeMethod("onSelect",t,this.$node,"specificDate",this.data.ltPropCurrentDate)),this._rest=!0,this._drop.toggle()}});