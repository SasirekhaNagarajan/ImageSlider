Lyte.Component.register("lyte-checkbox",{_template:'<template tag-name="lyte-checkbox">\n\t<template is="switch" value="{{ltPropType}}">\n\t\t<template case="default">\n\t\t\t<label class="lyteCheckbox lyteDefault" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}">\n\t\t\t\t<input onkeypress="{{action(\'preventPropagation\',event)}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}">\n\t\t\t\t<span class="{{ltPropFinalClass}}">\n\t\t\t\t\t<span class="{{ltPropFinalLabelClass}}">\n\t\t\t\t\t\t{{ltPropLabel}}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t</template>\n\t\t<template case="primary">\n\t\t\t<label class="lyteCheckbox lytePrimary" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}">\n\t\t\t\t<input onkeypress="{{action(\'preventPropagation\',event)}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}">\n\t\t\t\t<span class="{{ltPropFinalClass}}">\n\t\t\t\t\t<span class="{{ltPropFinalLabelClass}}">\n\t\t\t\t\t\t{{ltPropLabel}}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t</template>\n\t\t<template case="switch">\n\t\t\t<label class="" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}">\n\t\t\t\t<input onkeypress="{{action(\'preventPropagation\',event)}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="lyteHide on-off-sw" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}">\n\t\t\t\t<span class="{{ltPropFinalClass}}">\n\t\t\t\t\t<span class="on-btn"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="{{ltPropFinalLabelClass}}">\n\t\t\t\t\t{{ltPropLabel}}\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t</template>\n\t\t<template case="slider">\n\t\t\t<label class="lyteCheckSliderLabel" onmouseup="{{action(\'mup\',event)}}" onclick="{{action(\'prevent\',event)}}">\n\t\t\t\t<input onkeypress="{{action(\'preventPropagation\',event)}}" type="checkbox" id="{{ltPropId}}" name="{{ltPropName}}" value="{{ltPropValue}}" checked="{{ltPropChecked}}" disabled="{{ltPropDisabled}}" class="lyteHide" readonly="{{ltPropReadonly}}" onclick="{{action(\'checkBoxClicked\',event)}}">\n\t\t\t\t<span class="{{ltPropFinalClass}}">\n\t\t\t\t\t<span class="{{ltPropFinalLabelClass}}">\n\t\t\t\t\t\t{{ltPropLabel}}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t\n\t\t\t</label>\n\t\t\t</template>\n\t</template>\n</template>',_dynamicNodes:[{type:"attr",position:[1]},{type:"switch",position:[1],cases:{default:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,1]}]},primary:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,1]}]},switch:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,5]},{type:"text",position:[1,5,1]}]},slider:{dynamicNodes:[{type:"attr",position:[1]},{type:"attr",position:[1,1]},{type:"attr",position:[1,3]},{type:"attr",position:[1,3,1]},{type:"text",position:[1,3,1,1]}]}},default:{}}],_observedAttributes:["ltPropType","ltPropId","ltPropDisabled","ltPropChecked","ltPropLabel","ltPropName","ltPropValue","ltPropReadonly","ltPropFireOnInit","ltPropClass","ltPropLabelClass"],data:function(){return{ltPropType:Lyte.attr("string",{default:"default"}),ltPropId:Lyte.attr("string",{default:void 0}),ltPropDisabled:Lyte.attr("boolean",{default:!1}),ltPropChecked:Lyte.attr("boolean",{default:!1}),ltPropLabel:Lyte.attr("string",{default:void 0}),ltPropName:Lyte.attr("string",{default:void 0}),ltPropValue:Lyte.attr("string",{default:void 0}),ltPropReadonly:Lyte.attr("boolean",{default:!1}),ltPropFireOnInit:Lyte.attr("boolean",{default:!1}),ltPropClass:Lyte.attr("string",{default:""}),ltPropLabelClass:Lyte.attr("string",{default:""})}},didDestroy:function(){delete this.$node.focus,delete this.$node.blur,delete this.$node.click},reduceOpacity:function(){this.getData("ltPropDisabled")?this.$node.style.opacity="0.5":this.$node.style.opacity=""},disabledChange:function(){this.reduceOpacity()}.observes("ltPropDisabled"),setDefaults:function(){var t=this.getData("ltPropType"),e=this.getData("ltPropClass"),a=this.getData("ltPropLabelClass");this.reduceOpacity(),"switch"===t?this.setData("ltPropFinalClass",e||"lyteCheckSwitch"):"default"===t?this.setData("ltPropFinalClass",e||"lyteCheckBoxDefault"):"primary"===t?this.setData("ltPropFinalClass",e||"lyteCheckBoxPrimary"):"slider"===t&&this.setData("ltPropFinalClass",e||"lyteCheckSlider"),"slider"===t?this.setData("ltPropFinalLabelClass",a||"lyteCheckSliderText"):this.setData("ltPropFinalLabelClass",a||"")},typeObs:function(){this.setDefaults()}.observes("ltPropType","ltPropClass","ltPropLabelClass").on("init"),didConnect:function(){var t=this;this.$node.click=function(){var e=new Event("click",{bubbles:!0,cancelable:!0}),a=t.$node,s=a.ltProp("checked"),i=a.ltProp("disabled"),n=a.ltProp("readonly");i||n||(t.setData("eventCache",e),s?a.ltProp("checked",!1):a.ltProp("checked",!0),a.dispatchEvent(e))},this.$node.focus=function(){var e=t.$node,a=e.querySelector("input"),s=e.ltProp("disabled"),i=e.ltProp("readonly");s||i||a.focus()},this.$node.blur=function(){var e=t.$node,a=e.querySelector("input"),s=e.ltProp("disabled"),i=e.ltProp("readonly");s||i||a.blur()},this.fireCallBacksFunction.call(this,void 0,!0)},fireCallbacks:function(t,e){var a,s=this.getData("ltPropDisabled");if(!this.getData("preventRefire"))return s?(a=!!(t||{}).oldValue,this.setData("preventRefire",!0),this.setData("ltPropChecked",a),void this.setData("preventRefire",!1)):void this.fireCallBacksFunction.call(this,t,e)}.observes("ltPropChecked"),fireCallBacksFunction:function(t,e){var a=this.getData("ltPropChecked"),s=this.getData("ltPropFireOnInit"),i=this.getData("eventCache");if(!this.getData("ltPropDisabled"))if(this.$node.checked=a||!1,a&&e){if(!s)return;var n=this.$node.querySelector("input");this.getMethods("onBeforeChecked")&&this.executeMethod("onBeforeChecked",n,this,i),this.getMethods("onChecked")&&this.executeMethod("onChecked",n,this,i),this.getMethods("onChanged")&&this.executeMethod("onChanged",n,this,i)}else if(this.$node.checked&&!e){n=this.$node.querySelector("input");if(!this.clicked){if(this.setData("preventRefire",!0),this.setData("ltPropChecked",!1),this.getMethods("onBeforeChecked")){if(!(0!=this.executeMethod("onBeforeChecked",n,this,i)))return void this.setData("preventRefire",!1);this.setData("ltPropChecked",!0)}else this.setData("ltPropChecked",!0);this.setData("preventRefire",!1)}this.getMethods("onChecked")&&this.executeMethod("onChecked",n,this,i),this.getMethods("onChanged")&&this.executeMethod("onChanged",n,this,i)}else if(!this.$node.checked&&!e){n=this.$node.querySelector("input");if(!this.clicked){if(this.setData("preventRefire",!0),this.setData("ltPropChecked",!0),this.getMethods("onBeforeUnchecked")){if(!(0!=this.executeMethod("onBeforeUnchecked",n,this,i)))return void this.setData("preventRefire",!1);this.setData("ltPropChecked",!1)}else this.setData("ltPropChecked",!1);this.setData("preventRefire",!1)}this.getMethods("onUnchecked")&&this.executeMethod("onUnchecked",n,this,i),this.getMethods("onChanged")&&this.executeMethod("onChanged",n,this,i)}},actions:{preventPropagation:function(t){32===t.keyCode&&(this.preventClick=!0)},mup:function(t){var e;if(this.setData("prevented",!1),this.setData("sendEvent",!1),!this.getData("ltPropDisabled")){var a=this.$node.querySelector("input");e=a.checked,this.getMethods("onBeforeChecked")&&!e?0!=this.executeMethod("onBeforeChecked",a,this,t)||(this.setData("prevented",!0),t.preventDefault()):this.getMethods("onBeforeUnchecked")&&e&&(0!=this.executeMethod("onBeforeUnchecked",a,this,t)||(this.setData("prevented",!0),t.preventDefault()))}},prevent:function(t){this.getData("sendEvent")||t.stopPropagation()},checkBoxClicked:function(t){if(this.preventClick)this.preventClick=!1;else{var e;if(this.setData("sendEvent",!0),this.setData("eventCache",t),this.clicked=!0,this.getData("prevented"))return e=this.$node.querySelector("input"),this.setData("prevented",!1),this.setData("preventRefire",!0),e.checked?e.checked=!1:e.checked=!0,this.setData("preventRefire",!1),this.clicked=!1,void this.setData("eventCache",{});if(this.getData("ltPropDisabled"))return this.clicked=!1,t.preventDefault(),void this.setData("eventCache",{});t.target.checked?this.setData("ltPropChecked",!0):this.setData("ltPropChecked",!1),this.setData("eventCache",{}),this.clicked=!1}}}}),document.addEventListener("keydown",function(t){var e,a,s=t.keyCode;if(13===s||32===s){if("INPUT"!==(e=document.activeElement).tagName)return;for(;"LYTE-CHECKBOX"!==e.tagName&&"HTML"!==e.tagName;)e=e.parentElement;"LYTE-CHECKBOX"===e.tagName&&(a=e.ltProp("checked"),e.ltProp("checked",!a),t.preventDefault())}});